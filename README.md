# Prepoe Business Web

[![React](https://img.shields.io/badge/React-18.2.0-61DAFB?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.2.2-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-7.0.6-646CFF?logo=vite)](https://vitejs.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.3.5-38B2AC?logo=tailwind-css)](https://tailwindcss.com/)

ä¼æ¥­ç´šå¤šç§Ÿæˆ¶ SaaS å¹³å°ï¼Œæä¾› AI å®¢æœåŠ©ç†ã€æ•¸ä½åç‰‡ã€å…§å®¹å‰µä½œç­‰æ•´åˆæœå‹™ã€‚

---

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

**Prepoe Business Web** æ˜¯ä¸€å€‹åŸºæ–¼ React + TypeScript + Vite çš„ç¾ä»£åŒ– Web æ‡‰ç”¨ç¨‹å¼ï¼Œå°ˆç‚ºä¼æ¥­æä¾›ï¼š

- ğŸ¤– **AI æ™ºèƒ½å®¢æœ** - åŸºæ–¼ RAG (æª¢ç´¢å¢å¼·ç”Ÿæˆ) çš„æ–‡æª”å•ç­”ç³»çµ±
- ğŸ’³ **é›²ç«¯åç‰‡ç®¡ç†** - å¯è‡ªè¨‚è¨­è¨ˆçš„æ•¸ä½åç‰‡èˆ‡ QR Code åˆ†äº«
- ğŸ“ **å…§å®¹å‰µä½œå·¥å…·** - æ–‡ç« ã€å½±ç‰‡ã€éŸ³è¨Šç”Ÿæˆ
- ğŸ’¬ **èŠå¤©å¹³å°æ•´åˆ** - LINEã€Facebook Messenger æ©Ÿå™¨äººæ•´åˆ
- ğŸ“Š **æ´»å‹•ç®¡ç†ç³»çµ±** - å ±åã€ç°½åˆ°ã€è¨‚å–®ç®¡ç†
- ğŸ¨ **LINE Rich Menu ç·¨è¼¯å™¨** - è¦–è¦ºåŒ–é¸å–®é…ç½®å·¥å…·

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### å¤šç§Ÿæˆ¶è·¯ç”±è¨­è¨ˆ

å°ˆæ¡ˆæ¡ç”¨ä¸‰å±¤ç”¨æˆ¶æ¶æ§‹ï¼Œå„è‡ªæ“æœ‰ç¨ç«‹çš„è·¯ç”±ç©ºé–“ï¼š

```
/provider/*     â†’ æœå‹™æä¾›è€…ï¼ˆç®¡ç†æœå‹™ã€è¨­å®šåŠ©ç†ã€å‰µä½œå…§å®¹ï¼‰
/client/*       â†’ çµ‚ç«¯ç”¨æˆ¶ï¼ˆç€è¦½æœå‹™ã€èŠå¤©ã€åƒåŠ æ´»å‹•ï¼‰
/business/*     â†’ å•†æ¥­å®¢æˆ¶ï¼ˆæ•¸æ“šåˆ†æã€å¸³è™Ÿç®¡ç†ã€ä½¿ç”¨çµ±è¨ˆï¼‰
```

### æ ¸å¿ƒæŠ€è¡“æ£§

| é¡åˆ¥ | æŠ€è¡“ |
|------|------|
| **å‰ç«¯æ¡†æ¶** | React 18.2 + TypeScript 5.2 |
| **å»ºæ§‹å·¥å…·** | Vite 7.0 |
| **æ¨£å¼æ–¹æ¡ˆ** | Tailwind CSS 3.3 |
| **è·¯ç”±ç®¡ç†** | React Router v6 |
| **HTTP å®¢æˆ¶ç«¯** | Axios 1.10 |
| **ç‹€æ…‹ç®¡ç†** | React Context API |
| **ç¨‹å¼ç¢¼æª¢æŸ¥** | ESLint + TypeScript ESLint |

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- **Node.js**: >= 18.0.0
- **npm**: >= 9.0.0

### å®‰è£æ­¥é©Ÿ

```bash
# 1. Clone å°ˆæ¡ˆ
git clone https://github.com/FlashFalconDev/Prepoe.git
cd Prepoe

# 2. å®‰è£ä¾è³´
npm install

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆè«‹åƒè€ƒä¸‹æ–¹ã€Œç’°å¢ƒé…ç½®ã€ç« ç¯€ï¼‰
cp .env.example .env
# ç·¨è¼¯ .env å¡«å…¥å¿…è¦çš„è¨­å®šå€¼

# 4. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm run dev
```

é–‹ç™¼ä¼ºæœå™¨å°‡åœ¨ `http://localhost:3000` å•Ÿå‹•ã€‚

---

## âš™ï¸ ç’°å¢ƒé…ç½®

### å¿…è¦ç’°å¢ƒè®Šæ•¸

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼ˆ**åˆ‡å‹¿æäº¤åˆ° Git**ï¼‰ï¼š

```env
# ç¬¬ä¸‰æ–¹ç™»å…¥é…ç½®
VITE_GOOGLE_CLIENT_ID=your_google_client_id
VITE_LINE_CLIENT_ID=your_line_channel_id
VITE_FACEBOOK_APP_ID=your_facebook_app_id
VITE_APPLE_CLIENT_ID=your_apple_client_id

# æ‡‰ç”¨ç¨‹å¼é…ç½®
VITE_APP_NAME=Prepoe
VITE_APP_URL=https://your-domain.com
VITE_CLIENT_SID=prepoe
```

### API ç’°å¢ƒåˆ‡æ›

API Base URL æœƒæ ¹æ“š `MODE` è‡ªå‹•åˆ‡æ›ï¼š

- **é–‹ç™¼ç’°å¢ƒ** (`npm run dev`): `https://host.flashfalcon.info`
- **ç”Ÿç”¢ç’°å¢ƒ** (`npm run build`): `https://www.flashfalcon.info`

> è©³ç´°é…ç½®èªªæ˜è«‹åƒè€ƒ [ENV_SETUP.md](./ENV_SETUP.md)

---

## ğŸ“¦ å¯ç”¨æŒ‡ä»¤

| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| `npm run dev` | å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆé–‹ç™¼ APIï¼‰ |
| `npm run dev:prod` | å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆç”Ÿç”¢ APIï¼‰ |
| `npm run build` | å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬ |
| `npm run build:dev` | å»ºç½®é–‹ç™¼ç‰ˆæœ¬ |
| `npm run preview` | é è¦½ç”Ÿç”¢å»ºç½® |
| `npm run lint` | åŸ·è¡Œ ESLint æª¢æŸ¥ |

---

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ AI åŠ©ç†ç³»çµ± (RAG)

- ä¸Šå‚³æ–‡æª”å»ºç«‹çŸ¥è­˜åº«ï¼ˆæ”¯æ´ PDFã€DOCXã€TXTã€Markdownï¼‰
- å‘é‡åŒ–å„²å­˜èˆ‡èªç¾©æœå°‹
- å¤šåŠ©ç†ç®¡ç†ï¼ˆä¾ Feature Flag é™åˆ¶æ•¸é‡ï¼‰
- å¯èª¿æ•´ AI æ¨¡å‹ã€æº«åº¦ã€ç³»çµ±æç¤ºè©
- å°è©±æ­·å²æŒä¹…åŒ–

### 2ï¸âƒ£ é›²ç«¯åç‰‡

- æ‹–æ”¾å¼é€£çµæ’åº ([react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd))
- å®Œæ•´çš„å¤–è§€è‡ªè¨‚ï¼ˆé¡è‰²ã€ç¤¾ç¾¤åœ–ç¤ºæ¨£å¼ã€å¯è¦‹æ€§ï¼‰
- QR Code è‡ªå‹•ç”Ÿæˆ
- åˆ†äº«è¿½è¹¤ï¼ˆç€è¦½æ¬¡æ•¸ã€LINE åˆ†äº«æ¬¡æ•¸ï¼‰
- å…¬é–‹ URL: `/card/:slug`

### 3ï¸âƒ£ å…§å®¹å‰µä½œå·¥å…·

#### ğŸ“„ æ–‡ç« ç³»çµ±
- Markdown å¯Œæ–‡æœ¬ç·¨è¼¯å™¨
- åœ–ç‰‡/å½±ç‰‡åµŒå…¥
- æ¨™ç±¤åˆ†é¡
- é–±è®€æ¬Šé™è¨­å®šï¼ˆå…è²»/VIP/ä»˜è²» + æ™‚æ•ˆé™åˆ¶ï¼‰

#### ğŸ¬ å½±ç‰‡ç”Ÿæˆ
- æ–‡å­—è½‰å½±ç‰‡
- åœ–ç‰‡è½‰å½±ç‰‡
- å¤šæ¨¡å‹é¸æ“‡
- ç”Ÿæˆæ­·å²è¨˜éŒ„

#### ğŸ™ï¸ éŸ³è¨Šç”Ÿæˆ
- è²éŸ³å…‹éš†ï¼ˆä¸Šå‚³éŸ³æª”è¨“ç·´ï¼‰
- æ–‡å­—è½‰èªéŸ³
- å¤šéŸ³è‰²æ¨¡å‹

### 4ï¸âƒ£ èŠå¤©å¹³å°æ•´åˆ

- LINE Bot æ•´åˆï¼ˆRich Menu è¦–è¦ºåŒ–ç·¨è¼¯å™¨ï¼‰
- Facebook Messenger æ•´åˆ
- åŠ©ç†åµŒå…¥å¤–éƒ¨å¹³å°
- ç®¡ç†å“¡ä»‹å…¥åŠŸèƒ½ï¼ˆäººå·¥å®¢æœæ¥æ‰‹ï¼‰

### 5ï¸âƒ£ æ´»å‹•ç®¡ç†

- æ´»å‹•æ¨¡çµ„ç³»çµ±ï¼ˆå¯é‡ç”¨æ¨¡æ¿ï¼‰
- å…¬é–‹å ±åé é¢: `/client/event/join/:sku`
- QR Code ç°½åˆ°
- åƒèˆ‡è€…ç¶å®šç¢¼é©—è­‰
- è¨‚å–®æ•´åˆ

---

## ğŸ”’ å®‰å…¨æ©Ÿåˆ¶

### CSRF é˜²è­·

æ‰€æœ‰ POST/PUT/DELETE/PATCH è«‹æ±‚è‡ªå‹•è™•ç† CSRF Tokenï¼š

- å¾ Cookie è‡ªå‹•è®€å– Token
- 403 éŒ¯èª¤è‡ªå‹•é‡è©¦
- æ”¯æ´å¤šç¨® Cookie å‘½åæ ¼å¼

### ç¬¬ä¸‰æ–¹ OAuth

- Google / LINE / Facebook / Apple Sign-In
- State åƒæ•¸é˜²æ­¢ CSRF æ”»æ“Š
- Callback è·¯ç”±: `/auth/callback/:provider`

### æ¬Šé™æ§åˆ¶

- `ProtectedRoute` å…ƒä»¶ä¿è­·éœ€ç™»å…¥è·¯ç”±
- `FeatureGate` å…ƒä»¶åŸºæ–¼ Feature Flag æ§åˆ¶åŠŸèƒ½å¯è¦‹æ€§
- å¾Œç«¯ Session é©—è­‰

---

## ğŸ¨ UI/UX è¨­è¨ˆ

### Tailwind CSS è‡ªè¨‚ä¸»é¡Œ

```js
colors: {
  primary: { ... },      // ç´«è‰²ç³»ï¼ˆå“ç‰Œä¸»è‰²ï¼‰
  ai: { ... },           // æ©™è‰²ç³»ï¼ˆAI åŠŸèƒ½å°ˆç”¨ï¼‰
  gradient: { ... }      // é è¨­æ¼¸å±¤è‰²
}
```

### Toast é€šçŸ¥ç³»çµ±

ä½¿ç”¨ `useToast` Hook é¡¯ç¤ºè¨Šæ¯ï¼š

```typescript
import { useToast } from '@/hooks/useToast';

const { showSuccess, showError } = useToast();

showSuccess('å„²å­˜æˆåŠŸï¼');
showError('æ“ä½œå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
```

### ç¢ºèªå°è©±æ¡†

ä½¿ç”¨ `useConfirm` Hook é€²è¡ŒäºŒæ¬¡ç¢ºèªï¼š

```typescript
import { useConfirm } from '@/hooks/useConfirm';

const confirmed = await confirm({
  title: 'ç¢ºèªåˆªé™¤',
  message: 'æ­¤æ“ä½œç„¡æ³•å¾©åŸï¼Œç¢ºå®šç¹¼çºŒï¼Ÿ'
});
```

---

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ api.ts                    # API é…ç½®èˆ‡ CSRF è™•ç†
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ AuthContext.tsx           # èªè­‰ç‹€æ…‹èˆ‡ Feature Flags
â”‚   â””â”€â”€ BusinessCardContext.tsx   # åç‰‡è³‡æ–™ç®¡ç†
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ business/                 # å•†æ¥­å®¢æˆ¶é é¢
â”‚   â”œâ”€â”€ user/                     # çµ‚ç«¯ç”¨æˆ¶é é¢
â”‚   â”œâ”€â”€ Login.tsx                 # ç™»å…¥é 
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Layout.tsx                # ä¸»ä½ˆå±€
â”‚   â”œâ”€â”€ ProtectedRoute.tsx        # è·¯ç”±ä¿è­·
â”‚   â”œâ”€â”€ FeatureGate.tsx           # åŠŸèƒ½é–˜é“
â”‚   â””â”€â”€ keys/                     # é‡‘é‘°ç®¡ç†å…ƒä»¶
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ thirdPartyAuth.ts         # OAuth æ•´åˆ
â”‚   â”œâ”€â”€ chatPlatform.ts           # èŠå¤©å¹³å°æŠ½è±¡å±¤
â”‚   â”œâ”€â”€ fileUpload.ts             # æª”æ¡ˆä¸Šå‚³è™•ç†
â”‚   â””â”€â”€ usageTracking.ts          # ä½¿ç”¨é‡è¿½è¹¤
â””â”€â”€ hooks/
    â”œâ”€â”€ useToast.ts               # Toast é€šçŸ¥
    â””â”€â”€ useConfirm.ts             # ç¢ºèªå°è©±æ¡†
```

---

## ğŸ§ª æ¸¬è©¦èˆ‡é™¤éŒ¯

### CSRF Token å•é¡Œæ’æŸ¥

å¦‚æœé‡åˆ° 403 éŒ¯èª¤ï¼š

1. æª¢æŸ¥ç€è¦½å™¨ Cookie æ˜¯å¦åŒ…å« `csrftoken`
2. ç¢ºèª API å‘¼å«ä½¿ç”¨ `withCredentials: true`
3. æª¢æŸ¥å¾Œç«¯ CORS è¨­å®š
4. æ‰‹å‹•åˆ·æ–° Token: `refreshCSRFToken()`

### èªè­‰å•é¡Œæ’æŸ¥

1. æª¢æŸ¥ `localStorage` ä¸­çš„ `user` ç‰©ä»¶
2. é©—è­‰ `/api/protected/` endpoint å›å‚³ 200
3. ç¢ºèª Feature Flags æ­£ç¢ºè¼‰å…¥
4. æ¸…é™¤ localStorage å¾Œé‡æ–°ç™»å…¥

---

## ğŸ› ï¸ æ•ˆèƒ½å„ªåŒ–

### Code Splitting

Vite é…ç½®æ‰‹å‹•åˆ†å‰² chunksï¼š

- `react-vendor`: React æ ¸å¿ƒåº«
- `react-router`: è·¯ç”±åº«
- `lucide-icons`: åœ–ç¤ºåº«
- `utils`: Axiosã€QRCode å·¥å…·
- åŠŸèƒ½å°ˆç”¨ chunks: chatã€videoã€business-cardã€ai-service

### Lazy Loading

æ‰€æœ‰é é¢å…ƒä»¶æ¡ç”¨ `React.lazy()` + `Suspense` å»¶é²è¼‰å…¥ã€‚

### è³‡æ–™å¿«å–

- Business Card è³‡æ–™å¿«å–æ–¼ Contextï¼ˆé˜²æ­¢é‡è¤‡ API å‘¼å«ï¼‰
- Feature Flags æ¯å€‹ Session åªè¼‰å…¥ä¸€æ¬¡

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [ç’°å¢ƒè®Šæ•¸è¨­å®šæŒ‡å—](./ENV_SETUP.md)
- [ç™»å…¥ç³»çµ±å¯¦ä½œèªªæ˜](./LOGIN_SETUP.md)
- [ç¬¬ä¸‰æ–¹ OAuth è¨­å®š](./THIRD_PARTY_AUTH_SETUP.md)
- [Claude AI é–‹ç™¼æŒ‡å¼•](./CLAUDE.md)

---

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

### é–‹ç™¼æµç¨‹

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤è®Šæ›´: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. é–‹å•Ÿ Pull Request

### ç¨‹å¼ç¢¼è¦ç¯„

- ä½¿ç”¨ TypeScript å‹åˆ¥æ¨™è¨»
- éµå¾ª ESLint è¦å‰‡
- å…ƒä»¶å‘½åæ¡ç”¨ PascalCase
- æª”æ¡ˆå‘½åèˆ‡å…ƒä»¶åç¨±ä¸€è‡´

---

## ğŸ“„ æˆæ¬Š

æ­¤å°ˆæ¡ˆç‚ºç§æœ‰å°ˆæ¡ˆï¼Œç‰ˆæ¬Šæ‰€æœ‰ Â© FlashFalcon Dev Team

---

## ğŸ“ è¯çµ¡è³‡è¨Š

- **å®˜æ–¹ç¶²ç«™**: [https://www.flashfalcon.info](https://www.flashfalcon.info)
- **é–‹ç™¼ç’°å¢ƒ**: [https://host.flashfalcon.info](https://host.flashfalcon.info)
- **å•é¡Œå›å ±**: [GitHub Issues](https://github.com/FlashFalconDev/Prepoe/issues)

---

## ğŸ™ è‡´è¬

æœ¬å°ˆæ¡ˆä½¿ç”¨ä»¥ä¸‹é–‹æºæŠ€è¡“ï¼š

- [React](https://reactjs.org/)
- [Vite](https://vitejs.dev/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Lucide Icons](https://lucide.dev/)
- [React Router](https://reactrouter.com/)
- [Axios](https://axios-http.com/)
- [QRCode](https://github.com/soldair/node-qrcode)

---

<div align="center">
  <strong>Built with â¤ï¸ by FlashFalcon Dev Team</strong>
</div>
